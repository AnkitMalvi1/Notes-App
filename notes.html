<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes | 0.1.6</title>
    <link rel="stylesheet" href="notes.css">
</head>
<body>
    <section class="notesPage">
            <textarea id="title" contenteditable="true" placeholder="Enter the Title..." ></textarea>
            <textarea id="notes" contenteditable="true" placeholder="Enter the Notes..." ></textarea>
            <button id="addBtn" onclick="onAddBtn()">Add</button>
    </section>

    


    <script>
        
        let addBtn = document.getElementById("addBtn");
        let existingData = localStorage.getItem("Notes")
        let parsedData = existingData ? JSON.parse(existingData) : [];

        let title = document.getElementById("title");
        let notes = document.getElementById("notes");

        function onAddBtn() {
            

            // Check if title and notes are not empty
            if (title.value.trim() === "" || notes.value.trim() === "") return;

            // Get existing data from localStorage
            ;

            // Parse the existing data into a JavaScript array or initialize an empty array
            

            // Create a new note object with a unique ID
            let newNote = {
                id: parsedData.length + 1, // Assign a unique ID based on the current array length
                title: title.value,
                notes: notes.value
            };

            // Add the new note to the array
            parsedData.push(newNote);

            // Save the updated array back to localStorage
            localStorage.setItem("Notes", JSON.stringify(parsedData));
            title.value = "";
            notes.value = "";


            // Log the updated array
            console.log(parsedData);

        // Log the last object in the updated array
        let lastObject = parsedData[parsedData.length - 1];
        console.log(lastObject);

        // Redirect to index.html after adding the note
        window.location.href = "/index.html";
        }
        
        const urlParams = new URLSearchParams(window.location.search);
        const myParam = urlParams.get('id');
        const filteredNotes = parsedData.filter(note => String(note.id) === myParam);
        title.value = filteredNotes[0].title;
        notes.value = filteredNotes[0].notes;
         

    </script>
</body>
</html>